#+TITLE: [[file:ellit-org-logo.svg]] ellit-org

Emacs Lisp Literate programming tool

#+BEGIN_QUOTE
This file is automatically generated from =ellit-org.el= by
[[https://github.com/zevlg/ellit-org.el][GitHub#ellit-org.el]] tool.
Do not edit manually.
#+END_QUOTE

Generate documentation for Emacs Lisp package by extracting text
from comments of =.el= files and organizing them into single =.org=
file.

Idea is similiar to https://github.com/tumashu/el2org

* Why?

Separate files for code and documentanion is hard to get in sync.
Once changing something in source code files, you might change
comments as well and forget about documentation.

Also many things, useful for documentation, might be automatically
extracted from source code.  Such as:
- Keybindings
- Customizable options
- Docstrings for commands
- etc

* Using ellit-org in your project

Sample Makefile to generate user manual for the project:

#+BEGIN_SRC Makefile
EMACS=emacs -Q

manual.org: srcfile.el <list-of-other-files-used-to-generate-manual>
     $(EMACS) -batch -f package-initialize -l ellit-org \
                 --eval '(ellit-org-file "srcfile.el" "manual.org")'
#+END_SRC

See =ellit-org='s [[https://github.com/zevlg/ellit-org.el/blob/master/Makefile][Makefile]]

* Commenting .el files

1. Use double-semicolon comments, otherwise processing won't start
2. Processing starts when Org mode's property, heading or list is seen
3. Processing starts only if matched comment line begins commentary
   block, i.e. previous line is a non-commentary line
4. Processing stops on any non-commentary line

Here is the example:
#+begin_src emacs-lisp
  ;; * Heading1                        <--- processing starts here
  ;; This line is included into output
  ;;
  ;; This line also included into output
                                       <--- processing stops here
  ;; This line is NOT included into output
  ;; * This line also NOT included
  ;;   Since it does not begin the commentary block, see 3.

  ;; - However this line, is included  <--- processing starts here
  ;;
  ;;    Since new processing is started, and it will stop only on
  ;;    non-commentary line below
                                       <--- processing stops here
  ;; This line is *not* included
#+end_src

* Templating

ellit-org relies on Org mode's macro system by adding some useful
macroses.  See https://orgmode.org/manual/Macro-replacement.html

Macro replacement is done *after* processing comments, so make
sure your macroses are in processed part of the comments.

Templates syntax:
#+begin_example
{{{macro_name(arguments)}}}
#+end_example
~ARGUMENTS~ are optional string supplied to function which does
processing for ~MACRO_NAME~.

Supported templates:
- as-is(<string>) ::
  Insert STRING as is.
- ellit(<file>) ::
  Insert results of the FILE processing.
- elfile() ::
  Insert currently processing filename.
- kbd(<key>) ::
  Insert HTML <kbd> tag with KEY contents.
- where-is(<command>,<keymap>) ::
  Insert list of keys that calls COMMAND.
- vardoc1(<variable>) ::
  Insert first line from docstring for the VARIABLE.
- vardoc(<variable>) ::
  Insert full docstring for the VARIABLE.
- fundoc1(<function>) ::
  Insert first line from docstring for the FUNCTION.
- fundoc(<function>) ::
  Insert full docstring for the FUNCTION.
